# Definition of Done - Epic Checklists

**Purpose:** Clear completion criteria for Epic 12, 13, and 15 to prevent scope creep and ensure quality.

**Last Updated:** 2025-11-03  
**Related:** [ROADMAP-REVISED-2025-11.md](ROADMAP-REVISED-2025-11.md)

---

## Epic 12: Security & Secrets Detection

**Priority:** P0 - CRITICAL  
**Timeline:** Weeks 1-2 (14 days)  
**Spec:** [EPIC-12-security-secrets-detection.md](EPIC-12-security-secrets-detection.md)

### Definition of Done

#### Core Deliverables
- [ ] **Security rules created** for AI assistants (Augment, Claude Code)
  - [ ] Rules explicitly forbid documenting passwords, API keys, tokens
  - [ ] Rules provide redaction examples (e.g., `API_KEY=sk-***REDACTED***`)
  - [ ] Rules integrated into both starter packs
  - [ ] Rules tested with AI assistant (confirmed compliance)

- [ ] **SECURITY.md policy** created and published
  - [ ] Clear policy on what NOT to document
  - [ ] Redaction guidelines with examples
  - [ ] Incident response procedure
  - [ ] Published in product/docs/ directory

- [ ] **Secrets detection scripts** created (PowerShell + Bash)
  - [ ] Detects common patterns (API keys, passwords, tokens, emails, IPs)
  - [ ] Configurable via .logfile-config.yml
  - [ ] Clear error messages with line numbers
  - [ ] Exit codes: 0 (clean), 1 (warning), 2 (error)
  - [ ] Both scripts have identical functionality

- [ ] **Pre-commit hook integration** working
  - [ ] Hook template created in product/.git-hooks/
  - [ ] Hook runs secrets detection before commit
  - [ ] Hook blocks commit if secrets detected
  - [ ] Hook provides clear instructions to fix
  - [ ] Hook tested on 100 test commits

- [ ] **Redaction guide** created
  - [ ] Examples of safe vs. unsafe documentation
  - [ ] Redaction patterns for common secrets
  - [ ] AI assistant prompts for safe documentation
  - [ ] Published in product/docs/

- [ ] **Examples and tests** created
  - [ ] Valid examples (no secrets)
  - [ ] Invalid examples (with secrets for testing)
  - [ ] Test suite for secrets detection script
  - [ ] Examples in product/examples/security/

#### Quality Gates
- [ ] **Zero secrets leaked** in 100 test commits
- [ ] **Pre-commit hook blocks** all test secrets (100% detection rate)
- [ ] **False positive rate** <5% (doesn't block legitimate content)
- [ ] **AI rules compliance** tested with 10 commits (AI follows rules)
- [ ] **Cross-platform tested** (Windows PowerShell, PowerShell Core, Bash)

#### Documentation
- [ ] **CHANGELOG.md updated** with Epic 12 completion entry
- [ ] **DEVLOG.md updated** with Epic 12 narrative (why/how/results)
- [ ] **README.md updated** to mention security features
- [ ] **Starter pack READMEs updated** with security setup instructions

#### Epic Closure
- [ ] **All 8 tasks complete** (see EPIC-12 spec)
- [ ] **Epic 12 marked complete** in DEVLOG Current Context
- [ ] **GitHub release created** (v0.2.0 with security features)
- [ ] **Self-review completed** (what went well, what to improve)

---

## Epic 13: Validation & Reliability

**Priority:** P0 - CRITICAL  
**Timeline:** Weeks 3-4 (14 days)  
**Spec:** [EPIC-13-validation-reliability.md](EPIC-13-validation-reliability.md)

### Definition of Done

#### Core Deliverables
- [ ] **Log linter created** (lint-logs.py or PowerShell/Bash)
  - [ ] Validates CHANGELOG format (Unreleased, categories, dates)
  - [ ] Validates DEVLOG format (Current Context, Daily Log, fields)
  - [ ] Validates token counts against profile limits
  - [ ] Validates cross-references (no broken links)
  - [ ] Clear error messages with line numbers and fixes
  - [ ] Exit codes: 0 (pass), 1 (warning), 2 (error)

- [ ] **Post-commit verification** in AI rules
  - [ ] AI rules updated to self-verify after commits
  - [ ] Self-assessment prompts added to rules
  - [ ] AI checks: "Did I update CHANGELOG? DEVLOG? Validation pass?"
  - [ ] Rules integrated into both starter packs

- [ ] **GitHub Actions workflow** created
  - [ ] Workflow runs validation on every push
  - [ ] Workflow runs on pull requests
  - [ ] Workflow fails if validation errors
  - [ ] Workflow publishes validation report
  - [ ] Workflow template in product/.github/workflows/

- [ ] **Validation dashboard/report** created
  - [ ] Shows validation pass rate over time
  - [ ] Shows token counts and trends
  - [ ] Shows common errors and fixes
  - [ ] Can be simple markdown report or HTML dashboard
  - [ ] Published in product/docs/ or generated by script

- [ ] **Self-assessment prompts** for AI
  - [ ] Prompts added to log-file-maintenance rule
  - [ ] AI asks itself: "Did I follow all rules?"
  - [ ] AI verifies: "Are logs valid? Any secrets? Token count OK?"
  - [ ] Prompts tested with 10 commits

- [ ] **Examples and tests** created
  - [ ] Valid log examples (pass validation)
  - [ ] Invalid log examples (fail validation)
  - [ ] Test suite for log linter
  - [ ] Examples in product/examples/validation/

#### Quality Gates
- [ ] **95%+ validation pass rate** after 2 weeks of dogfooding
- [ ] **AI self-verifies** after every commit (100% compliance)
- [ ] **CI/CD catches failures** (GitHub Actions workflow working)
- [ ] **Zero false negatives** (linter catches all real errors)
- [ ] **False positive rate** <5% (doesn't flag valid logs)

#### Documentation
- [ ] **CHANGELOG.md updated** with Epic 13 completion entry
- [ ] **DEVLOG.md updated** with Epic 13 narrative (why/how/results)
- [ ] **README.md updated** to mention validation features
- [ ] **Validation guide updated** with new linter documentation
- [ ] **Starter pack READMEs updated** with validation setup

#### Epic Closure
- [ ] **All 10 tasks complete** (see EPIC-13 spec)
- [ ] **Epic 13 marked complete** in DEVLOG Current Context
- [ ] **Validation metrics published** (pass rate, token counts, etc.)
- [ ] **Self-review completed** (what went well, what to improve)

---

## Epic 15: Governance & Review

**Priority:** P1 - HIGH  
**Timeline:** Week 5 (7 days)  
**Spec:** [EPIC-15-governance-review.md](EPIC-15-governance-review.md)

### Definition of Done

#### Core Deliverables
- [ ] **ADR lifecycle implemented** (Proposed → Accepted)
  - [ ] ADR template updated with status field
  - [ ] AI rules updated to create ADRs as "Proposed"
  - [ ] Human approval required to change to "Accepted"
  - [ ] ADR index shows status for each ADR
  - [ ] Process documented in product/docs/

- [ ] **Human-in-the-loop rules** created
  - [ ] AI rules updated to ask permission for critical actions
  - [ ] Critical actions defined: ADRs, major refactors, deletions
  - [ ] AI provides context and waits for approval
  - [ ] Rules integrated into both starter packs

- [ ] **PR review checklist** created
  - [ ] Checklist for reviewing AI-generated changes
  - [ ] Covers: CHANGELOG updated, DEVLOG updated, validation passed, no secrets
  - [ ] Template in product/.github/PULL_REQUEST_TEMPLATE.md
  - [ ] Tested with 3 sample PRs

- [ ] **Rollback procedures** documented
  - [ ] How to revert AI-generated changes
  - [ ] How to restore from archive
  - [ ] How to fix validation errors
  - [ ] Guide in product/docs/rollback-guide.md

- [ ] **Conflict resolution guide** created (simple)
  - [ ] How to resolve merge conflicts in logs
  - [ ] How to handle competing ADRs
  - [ ] How to escalate decisions (for teams)
  - [ ] Guide in product/docs/conflict-resolution.md

- [ ] **Examples and tests** created
  - [ ] Example ADR lifecycle (Proposed → Accepted)
  - [ ] Example PR review with checklist
  - [ ] Example rollback scenario
  - [ ] Examples in product/examples/governance/

#### Quality Gates
- [ ] **ADRs require human approval** (tested with 3 ADRs)
- [ ] **AI asks permission** for critical actions (tested with 5 scenarios)
- [ ] **Clear rollback procedures** (tested with 2 rollback scenarios)
- [ ] **Governance tested** with 2-3 developers (if available)
- [ ] **Documentation complete** (all guides published)

#### Documentation
- [ ] **CHANGELOG.md updated** with Epic 15 completion entry
- [ ] **DEVLOG.md updated** with Epic 15 narrative (why/how/results)
- [ ] **README.md updated** to mention governance features
- [ ] **Starter pack READMEs updated** with governance setup
- [ ] **ADR created** for governance approach (ADR-012 or similar)

#### Epic Closure
- [ ] **All 8 tasks complete** (see EPIC-15 spec)
- [ ] **Epic 15 marked complete** in DEVLOG Current Context
- [ ] **Governance guide published** (comprehensive documentation)
- [ ] **Self-review completed** (what went well, what to improve)

---

## General Completion Criteria (All Epics)

### Code Quality
- [ ] All scripts have error handling
- [ ] All scripts have help/usage documentation
- [ ] All scripts tested on Windows and Mac/Linux
- [ ] No hardcoded paths (use config file)
- [ ] Consistent naming conventions

### Documentation Quality
- [ ] All new features documented in README
- [ ] All new scripts have usage examples
- [ ] All guides have clear step-by-step instructions
- [ ] All examples are tested and working
- [ ] Cross-references are valid (no broken links)

### Testing
- [ ] Manual testing completed (happy path)
- [ ] Edge cases tested (error handling)
- [ ] Cross-platform testing (Windows, Mac, Linux)
- [ ] AI assistant testing (Augment, Claude Code)
- [ ] Validation scripts pass on all examples

### Planning Files
- [ ] CHANGELOG.md updated with all changes
- [ ] DEVLOG.md updated with narrative entry
- [ ] Roadmap updated if priorities changed
- [ ] Epic spec marked complete
- [ ] Tasks checked off in task list

---

## How to Use This Document

1. **Before Starting Epic:** Review DoD checklist, understand requirements
2. **During Epic:** Check off items as completed, track progress
3. **Before Closing Epic:** Verify ALL items checked, no shortcuts
4. **After Epic:** Update DEVLOG with what went well, what to improve

**Remember:** Definition of Done prevents scope creep and ensures quality. Don't skip items to "move faster" - it will slow you down later.

---

## References

- **Roadmap:** [ROADMAP-REVISED-2025-11.md](ROADMAP-REVISED-2025-11.md)
- **Epic 12 Spec:** [EPIC-12-security-secrets-detection.md](EPIC-12-security-secrets-detection.md)
- **Epic 13 Spec:** [EPIC-13-validation-reliability.md](EPIC-13-validation-reliability.md)
- **Epic 15 Spec:** [EPIC-15-governance-review.md](EPIC-15-governance-review.md)
- **DEVLOG:** [../planning/DEVLOG.md](../planning/DEVLOG.md)
- **CHANGELOG:** [../planning/CHANGELOG.md](../planning/CHANGELOG.md)

